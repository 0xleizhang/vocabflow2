project: Philingo English Reader
description: An AI-powered English reading application with vocabulary learning and TTS features
repository: 0xleizhang/philingo

changelog:
  - version: 1.0.3
    date: 2025-12-17
    commit: 2ca7b97
    author: Lei Zhang
    type: feature
    summary: Enhanced tooltip interaction and improved word annotation details for better user experience
    changes:
      - area: WordTooltip Component
        description: Added comprehensive word information display with better organization
        improvements:
          - Added English dictionary definition display
          - Implemented syllable breakdown visualization
          - Added word roots and affixes information
          - Included synonym analysis section
          - Added antonyms display
          - Added word associations for memory aid
          - Included common phrases and collocations
          - Better visual separation of information sections with dividers
          - Used monospace font for IPA transcription for clarity
          - Improved tooltip layout with proper spacing and typography

      - area: Word Component
        description: Enhanced tooltip interaction and audio playback
        improvements:
          - Removed tooltip hide on play to keep information visible
          - Added audio playback initialization on tooltip open
          - Improved tooltip open/close logic for better state management
          - Enhanced user experience by maintaining tooltip visibility during audio playback
          - Refactored handleToggleTooltip to handle both open and audio logic

      - area: Service Layer (Gemini & OpenAI)
        description: Updated annotation prompts for comprehensive information
        improvements:
          - Enhanced prompt clarity for field requirements
          - Specified exact language requirements for each field
          - Improved instructions for synonym analysis
          - Better handling of optional fields (antonyms, associations, phrases)
          - Added explicit examples for each field type
          - Ensured consistent response format across providers

  - version: 1.0.2
    date: 2025-12-17
    commit: 2386548
    author: Lei Zhang
    type: feature
    summary: Updated word annotation prompts to provide comprehensive information in English
    changes:
      - area: Annotation Prompts
        description: Standardized annotation data format across providers
        improvements:
          - Changed annotation fields to use primarily English content
          - Only definition and synonym analysis remain in target language
          - Roots, affixes, synonyms, antonyms, associations now in English
          - Added explicit language specifications in prompts
          - Improved clarity of field requirements
          - Better support for multi-language learning

      - area: Service Layer Consistency
        description: Synchronized prompt format between Gemini and OpenAI services
        improvements:
          - Unified prompt structure across both providers
          - Consistent field descriptions and requirements
          - Matching example formats for better results
          - Improved prompt clarity for AI models

      - area: WritingMode Component
        description: Minor code quality improvements
        improvements:
          - Cleaned up import statements
          - Improved code organization

  - version: 1.0.1
    date: 2025-12-17
    commit: 676026a
    author: Lei Zhang
    type: feature
    summary: Implemented language selection and enhanced word annotation features with multi-language support
    changes:
      - area: Language Selection System
        description: Added comprehensive language switching capability
        improvements:
          - Created LanguageSelector component with Chinese, Japanese, and Vietnamese support
          - Implemented LanguageContext for global language state management
          - Language preference persisted to localStorage
          - All UI text dynamically switches based on selected language
          - Smooth language transition without page reload

      - area: Translations System
        description: Built comprehensive translation infrastructure
        improvements:
          - Created translations.ts with complete translations for Chinese, Japanese, and Vietnamese
          - Translated all UI elements including buttons, placeholders, error messages
          - Added mode-specific terminology for read, listen, pronounce, write modes
          - Translated feedback panel and API key modal content
          - Included word annotation field labels and descriptions
          - Language-specific error messages and warnings

      - area: WordTooltip Enhancement
        description: Significantly expanded word annotation information display
        improvements:
          - Added English dictionary definition field
          - Implemented syllable breakdown display
          - Added word roots section with etymology
          - Included affixes (prefixes and suffixes) information
          - Added synonyms list with analysis
          - Included antonyms section
          - Added word associations for memory aids
          - Included common phrases and collocations
          - Better organized layout with proper sections and dividers
          - All labels respect selected UI language

      - area: Service Layer Updates
        description: Enhanced annotation services to support multi-language
        improvements:
          - Updated fetchWordAnnotation to accept language parameter
          - Updated analyzePronunciation to accept language parameter
          - Modified prompts to request language-specific responses
          - Enhanced Gemini service with language support
          - Enhanced OpenAI service with language support
          - Added i18nService.ts for language code mapping

      - area: API Key Modal Enhancement
        description: Improved API key configuration interface
        improvements:
          - UI text respects selected language
          - Provider-specific instructions in multiple languages
          - Better user guidance for API key acquisition

      - area: Reader Component Integration
        description: Updated Reader to support language-aware operations
        improvements:
          - Passes language parameter to all annotation calls
          - Passes language parameter to pronunciation analysis
          - Language context integrated throughout component

      - area: WritingMode Component
        description: Fully internationalized writing mode interface
        improvements:
          - All UI text uses translation system
          - Mode instructions in selected language
          - Progress indicators in selected language
          - Success messages in selected language

      - area: Type Definitions
        description: Extended types for multi-language support
        improvements:
          - Added Language type for supported languages
          - Extended Annotation interface with new fields
          - Updated service function signatures

      - area: Configuration Files
        description: Added project configuration files
        improvements:
          - Added .nvmrc for Node version specification
          - Updated .claude/settings.local.json

  - version: 1.0.0
    date: 2025-12-16
    commit: 1bc606a
    author: Lei Zhang
    type: feature
    summary: Implemented comprehensive API status handling with real-time feedback system
    changes:
      - area: API Status Bar
        description: Added visual feedback system for API operations
        improvements:
          - Implemented thin status bar below header for real-time API status
          - Status bar shows animated pulse (brand color) during API loading
          - Status bar turns red with detailed error messages on API failures
          - Error messages auto-dismiss after 5 seconds
          - Displays operation context (e.g., "Looking up word definition", "Generating audio", "Analyzing pronunciation")
          - Minimal, non-intrusive design that doesn't disrupt user workflow

      - area: App Component State Management
        description: Enhanced state management for API operations
        improvements:
          - Added apiStatus state to track loading, errors, and current operation
          - Implemented handleApiStart callback to notify API request initiation
          - Implemented handleApiSuccess callback to clear loading state
          - Implemented handleApiError callback with automatic error dismissal
          - Passes status callbacks to Reader component for centralized status management

      - area: Reader Component Integration
        description: Integrated API status callbacks throughout Reader component
        improvements:
          - Added onApiStart, onApiSuccess, onApiError props to ReaderProps interface
          - Word definition lookup (fetchWordAnnotation) now reports status
          - TTS audio generation (fetchTTSAudio) now reports status
          - Pronunciation analysis (analyzePronunciation) now reports status
          - Enhanced error handling with user-friendly error messages
          - All API errors now provide specific error context to users

      - area: Error Messaging
        description: Improved error communication to users
        improvements:
          - Replaced generic error handling with specific error messages
          - Error messages extracted from Error objects when available
          - Fallback to descriptive default messages for each operation type
          - Errors displayed prominently but non-blockingly in status bar

      - area: User Experience
        description: Enhanced feedback and transparency
        improvements:
          - Users now always know when API operations are in progress
          - Clear indication of what operation is being performed
          - Immediate error feedback with actionable information
          - Reduced confusion when API calls fail or take time

  - version: 0.9.1
    date: 2025-12-16
    commit: f815058
    author: Lei Zhang
    type: feature
    summary: Enhanced Word component interaction and improved text formatting
    changes:
      - area: Word Component Click Behavior
        description: Improved click interaction in read mode for better UX
        improvements:
          - In read mode, clicking annotated words now plays pronunciation directly
          - Clicking unannotated words still looks up definition as before
          - Removed separate volume button for more compact UI
          - Only IPA transcription badge remains for cleaner appearance
          - Changed cursor to pointer when hovering over annotated words
          - Simplified handlePlay function by removing unnecessary state management

      - area: Audio Playback
        description: Streamlined pronunciation playback logic
        improvements:
          - Removed isPlaying state and related loading indicators
          - Cleaner click-to-play experience
          - Removed Volume2 icon import (no longer needed)

      - area: Text Formatting
        description: Improved Format button behavior
        improvements:
          - Format button now creates one sentence per line without empty lines
          - Added regex to remove any accidental empty lines
          - More compact and readable text layout
          - Updated comment to reflect "no empty lines" behavior

      - area: Code Quality
        description: Minor improvements and cleanup
        improvements:
          - Reorganized imports for better readability
          - Simplified cursor class logic in read mode
          - Removed unnecessary state management code

  - version: 0.9.2
    date: 2025-12-16
    commit: f1946f4
    author: Lei Zhang
    type: feature
    summary: Added multi-provider support with OpenAI integration
    changes:
      - area: Provider System Architecture
        description: Implemented flexible multi-provider architecture
        improvements:
          - Added LLMProvider type supporting 'gemini' and 'openai'
          - Created unified llmService.ts interface layer
          - Provider selection automatically routes to appropriate service
          - All API functions now accept provider parameter
          - Maintains separate caches for each provider

      - area: OpenAI Service Integration
        description: Full OpenAI API integration with feature parity
        improvements:
          - Implemented fetchTTSAudio using OpenAI TTS-1 model with "alloy" voice
          - Implemented fetchWordAnnotation using GPT-4o-mini for definitions and IPA
          - Implemented analyzePronunciation using Whisper-1 for transcription + GPT-4o-mini for analysis
          - Complete localStorage caching system with separate cache space
          - Cache keys prefixed with 'vocabflow_openai_' to avoid conflicts
          - Supports up to 20 TTS entries and 500 annotation entries

      - area: API Key Modal Enhancement
        description: Updated modal to support provider selection
        improvements:
          - Added provider selection buttons (Gemini / OpenAI)
          - Dynamic UI that adapts to selected provider
          - Provider-specific help text and API key acquisition links
          - Placeholder text changes based on provider
          - Saves both API key and provider preference to localStorage

      - area: App Component Updates
        description: Enhanced state management for provider support
        improvements:
          - Added provider state management
          - Loads provider preference from localStorage on mount
          - Passes provider to all child components
          - Updated warning messages to be provider-agnostic

      - area: Reader Component Integration
        description: Updated Reader to support multiple providers
        improvements:
          - Accepts provider prop in ReaderProps
          - All API calls (TTS, annotation, pronunciation) pass provider parameter
          - Cache clearing considers current provider
          - Seamless switching between providers

      - area: Dependencies
        description: Added OpenAI SDK
        improvements:
          - Added openai@^6.13.0 package
          - Configured with dangerouslyAllowBrowser for client-side usage
          - Note: Production should use backend proxy for security

      - area: Documentation
        description: Created comprehensive provider support documentation
        improvements:
          - Added PROVIDER_SUPPORT.md with detailed implementation guide
          - Documented model mappings (Gemini vs OpenAI)
          - Explained caching mechanism differences
          - Included security considerations and cost notes
          - Provided usage instructions for both providers

      - area: Technical Improvements
        description: Code quality and maintainability enhancements
        improvements:
          - Abstracted provider-specific logic into separate services
          - Consistent error handling across providers
          - Type-safe provider parameter throughout the application
          - Clean separation of concerns between UI and service layers

  - version: 0.9.0
    date: 2025-12-15
    commit: pending
    author: Lei Zhang
    type: feature
    summary: Added text history tracking, AI text generation, and enhanced explore page
    changes:
      - area: Text History System
        description: Implemented independent history tracking for practice texts
        improvements:
          - Added new localStorage key 'philingo_text_history' separate from current text storage
          - Automatically saves pasted texts to history when user starts reading
          - History entries include full text, timestamp, and preview
          - Prevents duplicate entries by updating timestamp for existing texts
          - Maintains up to 50 most recent history entries
          - History excludes default placeholder text

      - area: Explore Page - History Section
        description: Added history display and management features
        improvements:
          - Created "Your History" section showing all saved practice texts
          - Each history card displays date, preview, and word count
          - Added expandable "Show full text" feature for history items
          - Implemented individual delete button for each history entry
          - Added "Clear History" button to remove all entries
          - History section auto-hides when empty
          - Click "Practice" button to reload any historical text

      - area: Explore Page - AI Text Generation
        description: Added AI-powered custom text generation feature
        improvements:
          - New "Generate Text" button with gradient purple design
          - Modal interface for text generation with prompt input
          - Configurable text length (short/medium/long: 50-300 words)
          - Uses Gemini 2.0 Flash API for text generation
          - Generated texts automatically saved to history
          - Auto-redirect to main app after successful generation
          - Validates API key before generation
          - Error handling with user-friendly messages
          - Loading state with animated spinner

      - area: Navigation Enhancement
        description: Improved navigation between main app and explore page
        improvements:
          - Logo and title now link to explore page
          - Added hover effect on logo link
          - Better visual feedback for clickable elements

      - area: Content Updates
        description: Enhanced default text and about page content
        improvements:
          - Replaced default text with SEO-optimized project introduction
          - Added comprehensive feature descriptions for better discoverability
          - Included key learning benefits and usage instructions
          - Added "The Story Behind Philingo" section to about page
          - Story honors English teacher Phil and explains project inspiration
          - Describes evolution from personal tool to full platform
          - Reorganized about page with support section at top

  - version: 0.8.0
    date: 2025-12-14
    commit: pending
    author: Lei Zhang
    type: refactor
    summary: Standardized interaction mode names for consistency
    changes:
      - area: Type Definitions
        description: Unified mode naming convention to use verb forms
        improvements:
          - Renamed 'reading' to 'read' for consistency
          - Renamed 'test' to 'pronounce' for clarity
          - Renamed 'writing' to 'write' for consistency
          - All modes now use verb infinitive form (read, listen, pronounce, write)

      - area: Reader Component
        description: Updated all mode references and UI labels
        improvements:
          - Updated mode button labels to match new names
          - Updated mode tooltips and hints
          - Improved mode-related comments

      - area: Word Component
        description: Updated mode checks for pronunciation practice
        improvements:
          - Updated mode comparisons to use new names
          - Improved code comments for clarity

  - version: 0.7.0
    date: 2025-12-14
    commit: a76f2ce
    author: Lei Zhang
    type: feature
    summary: Enhanced UI with motivational quote and improved annotation caching
    changes:
      - area: App Component
        description: Added motivational quote to main interface
        improvements:
          - Integrated motivational quote to enhance user engagement
          - Improved overall user interface experience
      
      - area: API Key Modal
        description: Enhanced API key configuration interface
        improvements:
          - Improved modal design and functionality
          - Better user experience for API key management
      
      - area: Writing Mode
        description: Refined writing mode UI and interactions
        improvements:
          - Enhanced layout and component structure
          - Improved user feedback and interaction design
      
      - area: Gemini Service
        description: Significantly improved annotation caching mechanism
        improvements:
          - Implemented robust annotation caching system
          - Added cache management and optimization
          - Enhanced performance for vocabulary annotations
          - Reduced API calls through intelligent caching
      
      - area: Word Mastery Service
        description: Enhanced word mastery tracking
        improvements:
          - Improved mastery level calculation
          - Better data persistence and management

  - version: 0.6.0
    date: 2025-12-14
    commit: e6ecc9c
    author: Lei Zhang
    type: feature
    summary: Implemented writing mode with word mastery tracking
    changes:
      - area: Writing Mode Component
        description: Created new writing mode for vocabulary practice
        improvements:
          - Implemented interactive fill-in-the-blank exercises
          - Added word mastery tracking system
          - Created engaging writing practice interface
          - Integrated with vocabulary learning workflow
      
      - area: Reader Component
        description: Enhanced reader with writing mode integration
        improvements:
          - Added mode switching between reading and writing
          - Improved component structure for mode handling
          - Enhanced user interaction flow
      
      - area: Feedback Panel
        description: Enhanced feedback panel functionality
        improvements:
          - Improved feedback display and interaction
          - Better integration with learning modes
      
      - area: Word Mastery Service
        description: Implemented comprehensive word mastery tracking system
        improvements:
          - Created mastery level calculation algorithm
          - Added progress tracking and persistence
          - Implemented word selection for practice
          - Enhanced learning analytics
      
      - area: Type Definitions
        description: Extended type definitions for writing mode
        improvements:
          - Added new types for writing mode functionality
          - Improved type safety across components

  - version: 0.5.0
    date: 2025-12-14
    commit: 87dd922
    author: Lei Zhang
    type: feature
    summary: Added about page generator and audio recording with VAD
    changes:
      - area: About Page Generator
        description: Implemented automated about page generation
        improvements:
          - Created script to generate HTML about page from YAML changelog
          - Automated documentation generation process
          - Enhanced project documentation
      
      - area: Audio Recording Service
        description: Implemented audio recording with Voice Activity Detection
        improvements:
          - Created audio recording service with VAD technology
          - Implemented automatic silence detection
          - Added recording session management
          - Enhanced audio input handling
      
      - area: Reader Component
        description: Significant enhancements to reader functionality
        improvements:
          - Improved reading interface and interactions
          - Enhanced component structure
          - Better user experience
      
      - area: Feedback Panel
        description: Enhanced feedback panel with new features
        improvements:
          - Improved feedback collection and display
          - Better user interaction design
      
      - area: Gemini Service
        description: Major service improvements and optimizations
        improvements:
          - Enhanced API integration
          - Improved service reliability
          - Better error handling
      
      - area: Dependencies
        description: Added new project dependencies
        improvements:
          - Added required packages for new features
          - Updated dependency configurations

  - version: 0.4.0
    date: 2025-12-14
    commit: 7e3599e
    author: Lei Zhang
    type: feature
    summary: Enhanced playback features and audio caching
    changes:
      - area: Reader Component
        description: Added auto-play and repeat modes for better listening experience
        improvements:
          - Implemented auto-play functionality for continuous playback
          - Added repeat mode for vocabulary reinforcement
          - Updated interaction modes to 'reading' and 'listen'
      
      - area: Word Component
        description: Enhanced interaction modes and hover functionality
        improvements:
          - Updated interaction modes to 'reading' and 'listen'
          - Added hover functionality specifically for listen mode
          - Improved user interaction feedback
      
      - area: Gemini Service
        description: Implemented TTS audio caching and format conversion
        improvements:
          - Added TTS audio caching mechanism for performance optimization
          - Implemented PCM to WAV conversion for improved audio playback
          - Enhanced audio quality and playback reliability
      
      - area: Development Configuration
        description: Added local settings configuration
        improvements:
          - Added local settings configuration for development environment
          - Improved developer experience

  - version: 0.3.0
    date: 2025-12-14
    commit: c90eefb
    author: Lei Zhang
    type: refactor
    summary: Code structure refactoring
    changes:
      - area: Code Architecture
        description: Refactored code structure for improved readability and maintainability
        improvements:
          - Reorganized component structure
          - Improved code modularity
          - Enhanced maintainability
          - Better separation of concerns

  - version: 0.2.0
    date: 2025-12-13
    commit: 64a8856
    author: Lei Zhang
    type: feature
    summary: Data persistence implementation
    changes:
      - area: Application State
        description: Persist input text to localStorage for data retention
        improvements:
          - Added localStorage integration
          - Implemented automatic text saving
          - Enhanced user experience with data persistence
          - Prevented data loss on page refresh

  - version: 0.1.0
    date: 2025-12-10
    commit: 4b6eb08
    author: Lei Zhang
    type: feature
    summary: Initial Philingo English Reader project
    changes:
      - area: Core Features
        description: Initialize Philingo English Reader project
        improvements:
          - Created React + TypeScript + Vite application
          - Implemented basic reading interface
          - Integrated Gemini API for AI capabilities
          - Set up TTS (Text-to-Speech) service
          - Created vocabulary word components
          - Implemented annotation badge system
          - Added API key configuration modal
          - Set up reader component with text rendering

  - version: 0.0.1
    date: 2025-12-10
    commit: 67df5ef
    author: Lei Zhang
    type: initial
    summary: Initial repository setup
    changes:
      - area: Repository
        description: Initial commit
        improvements:
          - Created GitHub repository
          - Set up initial project structure

features_summary:
  core_features:
    - AI-powered English reading interface
    - Text-to-Speech (TTS) functionality with audio caching
    - Vocabulary word highlighting and annotation
    - Multiple interaction modes (read, listen, pronounce, and write)
    - Auto-play and repeat modes for enhanced learning
    - Writing mode with fill-in-the-blank exercises
    - Word mastery tracking and progress analytics
    - Audio recording with Voice Activity Detection (VAD)
    - Local storage persistence for user data
    - Intelligent annotation caching for performance
    - Automated about page generation from changelog

  technical_stack:
    - frontend: React + TypeScript + Vite
    - ai_service: Google Gemini API
    - styling: Tailwind CSS (implied from components)
    - audio: TTS with PCM to WAV conversion, audio recording with VAD
    - documentation: YAML-based changelog with HTML generation

  development_highlights:
    - Progressive feature enhancement
    - Focus on user experience and performance
    - Code quality and maintainability improvements
    - Audio caching for optimized performance
    - Data persistence for better UX
    - Comprehensive word mastery tracking system
    - Advanced annotation caching mechanism
    - Voice Activity Detection for audio recording

iteration_timeline:
  phase_1:
    period: 2025-12-10
    focus: Project initialization and core features
    achievements:
      - Set up development environment
      - Implemented basic reading interface
      - Integrated AI services
      - Created fundamental components

  phase_2:
    period: 2025-12-13
    focus: Data persistence and user experience
    achievements:
      - Added localStorage integration
      - Improved data retention

  phase_3:
    period: 2025-12-14 (Morning)
    focus: Code quality and advanced features
    achievements:
      - Refactored code structure
      - Enhanced playback features
      - Implemented audio caching
      - Added multiple interaction modes
      - Improved audio quality

  phase_4:
    period: 2025-12-14 (Afternoon)
    focus: Advanced learning features and audio capabilities
    achievements:
      - Implemented about page generation system
      - Added audio recording with Voice Activity Detection
      - Enhanced reader and feedback components
      - Improved Gemini service integration

  phase_5:
    period: 2025-12-14 (Late Afternoon)
    focus: Writing mode and word mastery system
    achievements:
      - Created writing mode with interactive exercises
      - Implemented comprehensive word mastery tracking
      - Enhanced feedback panel
      - Improved learning analytics

  phase_6:
    period: 2025-12-14 (Evening)
    focus: UI/UX enhancements and performance optimization
    achievements:
      - Added motivational quote feature
      - Implemented advanced annotation caching
      - Enhanced API key management interface
      - Refined writing mode UI
      - Improved word mastery tracking
